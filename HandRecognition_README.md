# 手部識別功能整合說明

## 概述

已成功將手部識別功能整合到 InteractiveTetrisAR 專案中，為遊戲添加了全新的手部控制模式。

## 新增功能

### 1. 手部控制遊戲模式
- **HandGestureGameView**: 整合手部識別和 AR 遊戲的主視圖
- **手勢映射**:
  - 手掌左右移動 → 方塊左右移動
  - 食指與拇指觸碰 → 快速下降
  - 食指與中指觸碰 → 順時針旋轉
  - 握拳 → 逆時針旋轉

### 2. 手部識別核心組件
- **CameraView**: 相機視圖，用於手部識別
- **GestureDetector**: 手勢檢測器，支援多種手勢識別
- **FingersOverlay**: 手部骨架視覺化覆蓋層

### 3. 教學和設定功能
- **HandGestureTutorialView**: 手部控制教學視圖
- **HandGestureSettingsView**: 手部控制參數設定

## 檔案結構

```
InteractiveTetrisAR/
├── Views/
│   ├── HandRecognition/           # 手部識別核心檔案
│   │   ├── CameraView.swift       # 相機視圖
│   │   ├── GestureDetector.swift  # 手勢檢測器
│   │   └── FingersOverlay.swift   # 手部骨架覆蓋
│   ├── HandGestureGameView.swift      # 手部控制遊戲視圖
│   ├── HandGestureTutorialView.swift  # 教學視圖
│   ├── HandGestureSettingsView.swift  # 設定視圖
│   └── MainMenuView.swift             # 更新主選單
```

## 手勢控制說明

### 基本手勢
1. **手掌移動**: 將手掌在相機前左右移動來控制方塊的左右移動
2. **食指與拇指觸碰**: 快速下降方塊
3. **食指與中指觸碰**: 順時針旋轉方塊
4. **握拳**: 逆時針旋轉方塊

### 使用提示
- 確保手部在相機視野內
- 保持手部動作清晰明確
- 可以關閉手部覆蓋層獲得更好的視覺效果
- 遊戲暫停時手勢不會生效

## 技術特點

### 1. 防彈跳機制
- 手勢歷史記錄和置信度計算
- 手勢切換冷卻時間
- 最小置信度閾值

### 2. 可調整參數
- 捏合距離閾值
- 握拳距離閾值
- 手指伸展閾值
- 手勢切換冷卻時間
- 最小置信度閾值

### 3. 視覺回饋
- 半透明相機預覽
- 手部骨架綠色覆蓋層
- 即時手勢狀態顯示

## 整合方式

### 1. 主選單更新
- 添加「手部控制」選項
- 添加「手部控制教學」按鈕
- 保持原有的觸控遊戲模式

### 2. 設定系統
- 在設定中添加「手部控制設定」
- 支援手勢靈敏度調整
- 提供參數重置功能

### 3. 遊戲體驗
- 無縫切換觸控和手部控制模式
- 統一的遊戲邏輯和分數系統
- 相同的 AR 視覺效果

## 使用方式

1. 啟動應用程式
2. 在主選單選擇「手部控制」
3. 可選擇查看「手部控制教學」
4. 在設定中調整手部控制參數
5. 開始遊戲並使用手部手勢控制

## 注意事項

- 需要相機權限
- 建議在光線充足的環境中使用
- 手部識別需要一定的學習曲線
- 可以根據個人習慣調整參數

## 未來改進

- 添加更多手勢類型
- 支援雙手控制
- 手勢自定義功能
- 手勢錄製和回放
- 更精確的手勢識別算法 